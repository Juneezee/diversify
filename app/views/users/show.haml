- content_for :title, @user.name

%section.section#profile
  .columns.is-centered
    .column.is-full.has-text-centered
      %figure.image.is-96x96.user-avatar-container.mx-auto.mb-3
        = image_tag user_avatar(@user)
      - if @user.name.present?
        %h1.title.is-size-4
          = @user.name
      %h1.subtitle.is-size-6.has-text-grey-dark
        = @user.email
        &#183;
        = @user.created_at.strftime('Joined on %d/%m/%Y')

%section#project
  %b-tabs{ 'destroy-on-hide': '', ':animated': 'false', 'type': 'is-boxed', 'v-model': 'selected', 'position': 'is-centered' }
    %b-tab-item
      %template{ 'slot': 'header' }
        Profile
      .content
        .tile.is-ancestor
          .tile.is-vertical
            .tile
              .tile.is-parent.is-vertical
                .tile.is-parent
                  %article.tile.is-child.notification
                    %nav.level
                      .level-item.has-text-centered
                        %div
                          %p.title.is-3 Projects
                      .level-item.has-text-centered
                        %div
                          %p.heading Project Joined
                          %p.subtitle.is-5= Project.where(id: @user.teams.pluck(:project_id)).where.not(user: @user).count
                      .level-item.has-text-centered
                        %div
                          %p.heading Project Owned
                          %p.subtitle.is-5= @user.projects.count
                      .level-item.has-text-centered
                        %div
                          %p.heading Project Completed
                          %p.subtitle.is-5= Project.where(id: @user.teams.pluck(:project_id), status: 'completed').count
                .tile
                  .tile.is-parent
                    %article.tile.is-child.notification
                      %p.title.is-3 Personality

                      - if @user.personality
                        %figure.image
                          .type
                            = File.read("#{Rails.root}/public/images/personalities/#{@user.personality.to_type.downcase}.svg").html_safe
                        %h4.text-center.mt-3= @user.personality.to_type
                      - else
                        No Personality Set
                  .tile.is-parent
                    %article.tile.is-child.notification.is-warning
                      %p.title.is-3 Skills
                      %pie-chart.mx-auto{ ':data': @chart.to_json, 'title': '', 'size': '200px' }
              -# .tile.is-parent.is-4
              -#   %article.tile.is-child.notification.is-info
              -#     %p.title Task List
              -#     - @task_activities.each do |a|
              -#       = a.name
    %b-tab-item
      %template{ 'slot': 'header' }
        Skills
      .container.is-fullscreen
        - if current_user == @user
          = link_to 'Add Skills', '', class: 'button is-pulled-right'
        - if @user.skills.blank?
          %h4.font-semibold.text-center.py-8
            No Skills
        - else
          %skill-table{ 'initial-data': @skills.to_json }
    %b-tab-item
      %template{ 'slot': 'header' }
        Timeline
      .container.is-fullscreen
        .timeline.is-centered
          %header.timeline-header
            %span.tag.is-medium.is-primary Start
          .timeline-item
            .timeline-marker
            .timeline-content
              %p.heading January 2016
              %p Timeline content - Can include any HTML element
          .timeline-item
            .timeline-marker.is-image.is-32x32
              %img{:src => "https://bulma.io/images/placeholders/32x32.png"}/
            .timeline-content
              %p.heading February 2016
              %p Timeline content - Can include any HTML element
          %header.timeline-header
            %span.tag.is-primary 2017
          .timeline-item
            .timeline-marker.is-icon
              %i.fa.fa-flag
            .timeline-content
              %p.heading March 2017
              %p Timeline content - Can include any HTML element
          .timeline-header
            %span.tag.is-medium.is-primary End
        -# Possible graphs with contribution of each tasks/category
        -# Will remove if not enough time
        -# good subsitute to the feedback system
    %b-tab-item
      %template{ 'slot': 'header' }
        Joined Projects
      .container.is-fullscreen
        %project-list{ 'init-projects-html': '', ':init-total': 0, ':has-tabs': false, ':profile-type': true }
    %b-tab-item
      %template{ 'slot': 'header' }
        Owned Projects
      .container.is-fullscreen
        %project-list{ 'init-projects-html': '', ':init-total': 0, ':has-tabs': false }





-# .container.is-fullscreen
  -# %section.section
  -#   .container
  -#     .columns.is-mobile
  -#       .column.is-half-mobile
  -#         %h1.title.is-1 Profile
  -#       - if current_user == @user
  -#         .column.is-half-mobile
  -#           = link_to 'Edit', settings_profile_path, class: 'button is-pulled-right'
  -#     .columns.is-vcentered
  -#       .column.is-one-fifth
  -#         %figure.image.is-128x128.user-avatar-container
  -#           = image_tag user_avatar(@user)
  -#       .column.is-four-fifths
  -#         %h1.is-size-3 Name: #{@user.name}
  -#         %h1.is-size-3 Email: #{@user.email}
  -#         .columns
  -#           .column.is-half
  -#             %h1.is-size-4= 'Projects Joined:'
  -#           .column.is-half
  -#             %h1.is-size-4= 'Projects Owned:'
  -# %section.section#skills
  -#   .container
  -#     .columns.is-mobile
  -#       .column.is-half-mobile
  -#         %h1.title.is-1 Skills
  -#       - if current_user == @user
  -#         .column.is-half-mobile
  -#           = link_to 'Add Skills', '', class: 'button is-pulled-right'
