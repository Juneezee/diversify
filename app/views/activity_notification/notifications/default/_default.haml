- content_for :notification_content, flush: true do
  %div{:class => "notification_list #{notification.opened? ? "opened" : "unopened"}"}
    .notification_list_cover
    .list_image
    .list_text_wrapper
      %p.list_text
        %strong= notification.notifier.present? ? notification.notifier.printable_notifier_name : 'Someone'
        - if notification.group_member_notifier_exists?
          = " and #{notification.group_member_notifier_count} other"
          = notification.notifier.present? ? notification.notifier.printable_type.downcase.pluralize(notification.group_member_notifier_count) : 'people'
        notified you of
        - if notification.notifiable.present?
          - if notification.group_member_exists?
            = " #{notification.group_notification_count} #{notification.notifiable_type.humanize.downcase.pluralize(notification.group_notification_count)} including"
          = notification.notifiable.printable_notifiable_name(notification.target)
          = "in #{notification.group.printable_group_name}" if notification.group.present?
        - else
          - if notification.group_member_exists?
            = " #{notification.group_notification_count} #{notification.notifiable_type.humanize.downcase.pluralize(notification.group_notification_count)}"
          - else
            = " a #{notification.notifiable_type.humanize.downcase.singularize}"
          = "in #{notification.group.printable_group_name}" if notification.group.present?
          but the notifiable is not found. It may have been deleted.
        %br/
        %span= notification.created_at.strftime("%b %d %H:%M")
%div{:class => "notification_#{notification.id}"}
  - if notification.unopened?
    = link_to open_notification_path_for(notification, parameters.slice(:routing_scope, :devise_default_routes).merge(reload: false)), method: :put, remote: true, class: "unopened_wrapper" do
      .unopened_circle
      .unopened_description_wrapper
        %p.unopened_description Open
    = link_to open_notification_path_for(notification, parameters.slice(:routing_scope, :devise_default_routes).merge(move: true)), method: :put do
      = yield :notification_content
    .unopened_wrapper
  - else
    = link_to move_notification_path_for(notification, parameters.slice(:routing_scope, :devise_default_routes)) do
      = yield :notification_content
